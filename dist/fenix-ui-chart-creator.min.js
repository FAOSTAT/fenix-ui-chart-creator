define(["jquery","underscore","loglevel","fenix-ui-pivotator","fenix-ui-pivotator-utils","highcharts","highcharts-more","highcharts-no-data-to-display","highcharts-exporting","amplify-pubsub","jvenn"],function(t,e,i,o,r,n,a,s,l,h,d){return function(t){function e(o){if(i[o])return i[o].exports;var r=i[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){var o,r;o=[i(2),i(3),i(4),i(5),i(6),i(7),i(8),i(9)],r=function(t,e,o,r,n,a,s,l){"use strict";function h(e){o.info("FENIX Chart"),o.info(e),t.extend(!0,this,a,{initial:e}),this._parseInput(e);var i=this._validateInput();return i===!0?(this._initVariables(),this._bindEventListeners(),this._renderChart(),this):(o.error("Impossible to create Chart"),void o.error(i))}var d="./renderers/";return h.prototype.update=function(t){this._parseInputUpdate(t);var e=this.fenixTool.parseInput(this.initial.model.metadata.dsd,this.pivotatorConfig);this.chart.model=this.pivotator.pivot(this.initial.model,e),this.chart.update(t)},h.prototype.on=function(t,e,i){var o=i||this;return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:o,callback:e}),this},h.prototype.redraw=function(){this.chart&&t.isFunction(this.chart.redraw)?this.chart.redraw():o.warn("Abort redraw")},h.prototype._trigger=function(t){if(!this.channels[t])return!1;for(var e=Array.prototype.slice.call(arguments,1),i=0,o=this.channels[t].length;i<o;i++){var r=this.channels[t][i];r.callback.apply(r.context,e)}return this},h.prototype._parseInput=function(){this._parseInputUpdate(this.initial)},h.prototype._parseInputUpdate=function(e){var i=e.useDimensionLabelsIfExist===!0?"fenixtool":"raw";this.$el=t(e.el),this.type=e.type,this.model=e.model;var o={};o.inputFormat=i,o.aggregationFn=e.aggregationFn,o.aggregations=e.aggregations||[],o.hidden=e.hidden||[],o.columns=e.x,o.values=e.y||["value"],o.rows=e.series,o.formatter=e.formatter||"value",o.valueOutputType=e.valueOutputType,o.showRowHeaders=e.showRowHeaders||!1,o.decimals=e.decimals||2,o.showCode=e.showCode||!1,o.showFlag=e.showFlag||!1,o.showUnit=e.showUnit||!1,this.pivotatorConfig=o,this.renderer=e.renderer||a.renderer,this.lang=e.lang||"EN",this.config=e.config,"function"==typeof e.createConfiguration&&(this.createConfiguration=e.createConfiguration)},h.prototype._validateInput=function(){var t=!0,e=[];return this.id||(window.fx_chart_id=window.fx_chart_id>=0?window.fx_chart_id++:0,this.id=String(window.fx_chart_id),o.warn("Impossible to find Chart id. Set auto id to: "+this.id)),this.$el||(e.push({code:r.MISSING_CONTAINER}),o.warn("Impossible to find Chart container")),0===this.$el.length&&(e.push({code:r.MISSING_CONTAINER}),o.warn("Impossible to find box container")),e.length>0?e:t},h.prototype._initVariables=function(){this.channels={},this.pivotator=new s,this.fenixTool=new l},h.prototype._bindEventListeners=function(){},h.prototype._getPluginPath=function(e){var i,r=t.extend(!0,{},this.pluginRegistry),n=r[e];return n||o.error('Registration not found for "'+e+' plugin".'),n.path?i=n.path:o.error('Impossible to find path configuration for "'+e+' plugin".'),d+i},h.prototype._renderChart=function(){var e=this._getRenderer(this.renderer),i=this.fenixTool.parseInput(this.model.metadata.dsd,this.pivotatorConfig),o=this.pivotator.pivot(this.model,i),r=t.extend(!0,{},{pivotatorConfig:this.pivotatorConfig,el:this.$el,model:o,lang:this.lang,type:this.type,config:this.config,createConfiguration:this.createConfiguration});this.chart=new e(r),this._trigger("ready")},h.prototype._getEventName=function(t){return this.id.concat(t)},h.prototype._getRenderer=function(t){return i(10)(this._getPluginPath(t))},h.prototype._unbindEventListeners=function(){},h.prototype.dispose=function(){this.chart.dispose(),this._unbindEventListeners()},h.prototype._callSelectorInstanceMethod=function(e,i,r,n){var a=this.chart;return t.isFunction(a[i])?a[i](r,n):void o.error(e+" selector does not implement the mandatory "+i+"() fn")},h}.apply(e,o),!(void 0!==r&&(t.exports=r))},function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e){t.exports=i},function(t,e,i){var o;o=function(){"use strict";var t="";return{MISSING_CONTAINER:t+"missing_container",INVALID_DATA:t+"invalid_data",READY_TIMEOUT:t+"ready_timeout"}}.call(e,i,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,i){var o;o=function(){"use strict";return{}}.call(e,i,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,i){var o;o=function(){"use strict";return{renderer:"highcharts",pluginRegistry:{highcharts:{path:"highcharts"},jvenn:{path:"jvenn"}}}}.call(e,i,e,t),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports=o},function(t,e){t.exports=r},function(t,e,i){function o(t){return i(r(t))}function r(t){return n[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var n={"./index":1,"./index.js":1,"./renderers/highcharts":11,"./renderers/highcharts.js":11,"./renderers/jvenn":20,"./renderers/jvenn.js":20};o.keys=function(){return Object.keys(n)},o.resolve=r,t.exports=o,o.id=10},function(t,e,i){var o,r;o=[i(2),i(3),i(4),i(5),i(6),i(7),i(8),i(19),i(12),i(13),i(14),i(15),i(16),i(17),i(18)],r=function(t,e,i,o,r,n,a,s,l,h){"use strict";function d(e){i.info("FENIX Highcharts"),i.info(e),t.extend(!0,this,n,e);var o=this._validateInput();return o===!0?(this._initVariables(),this._bindEventListeners(),this._renderHighcharts(this.pivotatorConfig),this):(i.error("Impossible to create Highcharts"),void i.error(o))}return d.prototype.on=function(t,e,i){var o=i||this;return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:o,callback:e}),this},d.prototype.redraw=function(){this.chart.length>0?this.chart.highcharts().reflow():i.warn("Abort redraw")},d.prototype.update=function(t){this.type=t.type?t.type:this.type,this._renderHighcharts(t)},d.prototype._renderHighcharts=function(e){var i=this.model,o=s[this.type];e||alert("Impossible to find chart configuration: "+this.type);var r,n=t.extend(!0,{},l,o);r="function"==typeof this.createConfiguration?this.createConfiguration(i,n):this._populateData(this.type,i,n);var r=t.extend(!0,r,this.config);try{this.chart=h.chart(this.el[0],r)}catch(a){console.log("error",a,e)}this._trigger("ready")},d.prototype._populateData=function(t,e,i){switch(t.toLowerCase()){case"heatmap":var o=0;for(var r in e.rows)i.xAxis.categories.push(e.rows[r].join(" "));for(var r in e.cols2)i.yAxis.categories.push(e.cols2[r].join(" "));for(var r in e.data)for(var n in e.data[r])o++,i.series[0].data.push([parseFloat(r),parseFloat(n),e.data[r][n]]);break;case"scatter":for(var n in e.cols2)if(n>0){var a=[];for(var r in e.data)a.push([e.data[r][n-1],e.data[r][n]]);i.series.push({name:e.cols2[n-1]+" X "+e.cols2[n],data:a})}break;case"pyramid":var s=[],l="";e.cols2.length>2&&(l=e.cols2[0].join("_"));var h={name:l,data:jStat(e.data).col(0).alter(function(t){return t*-1})},d="";e.cols2.length>2&&(d=e.cols2[1].join("_"));var p={name:d,data:jStat(e.data).col(1)||[]};for(var r in e.rows)i.xAxis[0].categories.push(e.rows[r].join("_")),i.xAxis[1].categories.push(e.rows[r].join("_"));i.series.push(h),i.series.push(p);break;case"boxplot":var s=[];for(var r in e.rows){i.xAxis.categories.push(e.rows[r].join("_"));var c=[jStat(e.data[r]).min()+0].concat(jStat(e.data[r]).quartiles().concat(jStat(e.data[r]).max()));s.push(c)}i.series.push({data:s});break;case"donut":var s=[],u=Math.floor(100/e.cols2.length),f=0;for(var r in e.cols2){var g=[];for(var n in e.rows)e.data[n][r]>0&&g.push({name:e.rows[n].join("-"),y:e.data[n][r]});i.series.push({name:e.cols2[r].join("-"),data:g,size:f+u+"%",innerSize:f+"%",dataLabels:{formatter:function(){return this.y>5?this.point.name:null},color:"#ffffff",distance:-30}}),f+=u}break;case"pie":var s=[];for(var r in e.rows){var c=jStat(e.data[r]).sum();s.push(c),i.series[0].data.push({y:c,name:e.rows[r].join("<br>"),drilldown:e.rows[r].join("_")});var v=[];for(var n in e.cols2)e.data[r][n]>0&&v.push([e.cols2[n].join(" "),e.data[r][n]]);var y={name:e.rows[r].join("<br>"),id:e.rows[r].join("_"),data:v};i.drilldown.series.push(y)}break;case"pieold":i.chart.type="pie";for(var x in e.cols)e.cols.hasOwnProperty(x)&&(r=e.cols[x],i.xAxis.categories.push(r.title[this.lang]));var b=[];for(var m in e.rows){for(var n in i.xAxis.categories){var w={};w.y=e.data[m][n],w.name=i.xAxis.categories[n],b.push(w)}i.series.push({name:e.rows[m].join(" "),data:b})}break;case"treemapold":i={series:[{type:"treemap",layoutAlgorithm:"squarified",allowDrillToNode:!0,animationLimit:1e3,turboThreshold:0,dataLabels:{enabled:!1},levelIsConstant:!1,levels:[{level:1,dataLabels:{enabled:!0},borderWidth:3}],data:[]}],title:{text:""}};for(var r in e.rows){var x=e.rows[r];i.series[0].data.push({name:x.join(" "),id:"id_"+r});for(var n in e.cols2label){var A=e.cols2label[n];e.data[r][n]&&e.data[r][n]>=0&&i.series[0].data.push({name:A.join(" "),id:"id_"+r+"_"+n,parent:"id_"+r,value:e.data[r][n]})}}break;case"treemap":var _={rows:this.pivotator.toTree(e.rows,1),cols:this.pivotator.toTree(e.cols2,1)};i={series:[{type:"treemap",layoutAlgorithm:"squarified",allowDrillToNode:!0,animationLimit:1e3,turboThreshold:0,dataLabels:{enabled:!1},levelIsConstant:!1,levels:[{level:1,dataLabels:{enabled:!0},borderWidth:3}],data:[]}]};for(var n in _.rows)for(var r in _.rows[n]){var x=_.rows[n][r];i.series[0].data.push({name:x.id,id:x.id,parent:x.id.split("_").slice(0,x.id.split("_").length-1).join("_")})}for(var r in e.rows){var x=e.rows[r];for(var n in e.cols2label){var A=e.cols2label[n];e.data[r][n]&&e.data[r][n]>=0&&i.series[0].data.push({name:A.join(" "),id:"id_"+r+"_"+n,parent:x.join("_"),value:e.data[r][n]})}}break;case"bubble":for(var r in e.rows)e.data[r][0]&&e.data[r][1]&&e.data[r][2]&&i.series[0].data.push({x:e.data[r][0],y:e.data[r][1],z:e.data[r][2],name:e.rows[r].join(" "),country:""});i.tooltip={useHTML:!0,headerFormat:"<table>",pointFormat:'<tr><th colspan="2"><h3>{point.name}</h3></th></tr><tr><th>'+e.cols2[0]+":</th><td>{point.x}</td></tr><tr><th>"+e.cols2[1]+":</th><td>{point.y}</td></tr><tr><th>"+e.cols2[2]+":</th><td>{point.z}</td></tr>",footerFormat:"</table>",followPointer:!0};break;case"bubblecircle":var F={},L=0,C=[];for(var r in e.data)C.push((e.data[r][0]?e.data[r][0].toFixed(10):-1)+"_"+r);console.log("orderRow",C),C.sort(function(t,e){return t.split("_")[0]-e.split("_")[0]});for(var r in C){var T=C[r].split("_");null!==parseFloat(T[0])&&parseFloat(T[0])>=0&&L++}var k=2*Math.PI/L,I=0;for(var r in C){var T=C[r].split("_"),M=parseFloat(T[0]),P=parseInt(T[1]);if(null!==M&&M>=0){var S=Math.cos(I),W=Math.sin(I);F={x:S,y:W,z:M,name:e.rows[P].join(" "),country:e.rows[P].join(" ")},I+=k,i.series[0].data.push(F)}}i.tooltip={useHTML:!0,headerFormat:"<table>",pointFormat:'<tr><th colspan="2">{point.country}</th></tr><tr><th>'+e.cols2[0]+":</th><td>{point.z}</td></tr>",footerFormat:"</table>",followPointer:!0};break;default:for(var x in e.cols)e.cols.hasOwnProperty(x)&&(r=e.cols[x],i.xAxis.categories.push(r.title[this.lang]));for(var r in e.rows)i.series.push({name:e.rows[r].join(" "),data:e.data[r]})}return i},d.prototype._trigger=function(t){if(!this.channels[t])return!1;for(var e=Array.prototype.slice.call(arguments,1),i=0,o=this.channels[t].length;i<o;i++){var r=this.channels[t][i];r.callback.apply(r.context,e)}return this},d.prototype._validateInput=function(){var t=!0,e=[];return e.length>0?e:t},d.prototype._initVariables=function(){this.channels={},this.pivotator=new a},d.prototype._bindEventListeners=function(){},d.prototype._getEventName=function(t){return this.id.concat(t)},d.prototype._unbindEventListeners=function(){},d.prototype.dispose=function(){this._unbindEventListeners()},d}.apply(e,o),!(void 0!==r&&(t.exports=r))},function(t,e,i){var o;i(2),i(2);o=function(){"use strict";return{chart:{events:{},type:"line",alignTicks:!1,backgroundColor:"#FFFFFF",spacing:[20,1,1,1],plotBorderColor:"#ffffff",plotBorderWidth:0,style:{fontFamily:"Roboto",fontSize:"12px",fontWeight:300},zoomType:"xy",resetZoomButton:{position:{align:"right",x:-10},theme:{fill:"#FFFFFF",stroke:"#666666",width:60,style:{textAlign:"center",fontSize:10},states:{hover:{fill:"#e6e6e6",stroke:"#666666",style:{}}}}}},colors:["#56adc3","#5691c3","#5663c3","#d2ccbf","#DF3328","#F1E300","#F7AE3C","#DF3328","#2e8bcc","#339933","#e51400","#ffc40d","#f39c12","#e671b8","#7b4f9d","#8cbf26","#ff0097","#00aba9","#1abc9c","#16a085","#2ecc71","#27ae60","#3498db","#2980b9","#9b59b6","#8e44ad","#34495e","#2c3e50","#f1c40f","#e67e22","#d35400","#e74c3c","#c0392b"],credits:{enabled:!1},exporting:{enabled:!0},navigation:{buttonOptions:{theme:{"stroke-width":1,stroke:"#666666",r:0,states:{hover:{stroke:"#666666",fill:"#e6e6e6"},select:{stroke:"#666666",fill:"#e6e6e6"}}}}},legend:{enabled:!0,floating:!1,padding:50,backgroundColor:"#FFFFFF",align:"left",verticalAlign:"bottom",x:15,borderWidth:0,symbolPadding:10,itemStyle:{cursor:"pointer",color:"#666666",fontSize:"14px",fontWeight:300},itemHiddenStyle:{color:"#eeeeee"},itemHoverStyle:{color:"#3ca7da"},navigation:{activeColor:"#3ca7da",inactiveColor:"#666666",arrowSize:8,animation:!0,style:{color:"#666666",fontSize:"10px"}}},title:{text:"",x:-20},subtitle:{text:null,x:-20},xAxis:{gridLineWidth:1,lineColor:"#e0e0e0",tickColor:"#e0e0e0",gridLineColor:"#eeeeee",tickLength:7,labels:{y:25,style:{color:"#666666",fontWeight:"300",fontSize:12}},categories:[],title:{enabled:!1,text:"null"}},yAxis:{gridLineWidth:1,lineWidth:1,lineColor:"#e0e0e0",gridLineColor:"#eeeeee",labels:{style:{color:"#666666",fontWeight:"300",fontSize:12}},title:{enabled:!1,text:"null"},plotLines:[{value:0,width:1}]},tooltip:{borderWidth:1,shadow:!0,crosshairs:"mixed",shared:!1},series:[],noData:{style:{fontWeight:"bold",fontSize:"15px",color:"#303030"}}}}.call(e,i,e,t),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports=n},function(t,e){t.exports=a},function(t,e,i){i(2),i(2);!function(e){"object"==typeof t&&t.exports?t.exports=e:e(Highcharts)}(function(t){var e=t.seriesTypes,i=t.map,o=t.merge,r=t.extend,n=t.extendClass,a=t.getOptions().plotOptions,s=function(){},l=t.each,h=t.grep,d=t.pick,p=t.Series,c=t.stableSort,u=t.Color,f=function(t,e,i){var o,i=i||this;for(o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t)},g=function(t,e,i,o){return o=o||this,t=t||[],l(t,function(r,n){i=e.call(o,i,r,n,t)}),i},v=function(t,e,i){i=i||this,t=e.call(i,t),t!==!1&&v(t,e,i)};a.treemap=o(a.scatter,{showInLegend:!1,marker:!1,borderColor:"#E0E0E0",borderWidth:1,dataLabels:{enabled:!0,defer:!1,verticalAlign:"middle",formatter:function(){return this.point.name||this.point.id},inside:!0},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.node.val}</b><br/>"},layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,states:{hover:{borderColor:"#A0A0A0",brightness:e.heatmap?0:.1,shadow:!1}},drillUpButton:{position:{align:"right",x:-10,y:10}}}),e.treemap=n(e.scatter,o({pointAttrToOptions:{},pointArrayMap:["value"],axisTypes:e.heatmap?["xAxis","yAxis","colorAxis"]:["xAxis","yAxis"],optionalAxis:"colorAxis",getSymbol:s,parallelArrays:["x","y","value","colorValue"],colorKey:"colorValue",translateColors:e.heatmap&&e.heatmap.prototype.translateColors},{type:"treemap",trackerGroups:["group","dataLabelsGroup"],pointClass:n(t.Point,{setVisible:e.pie.prototype.pointClass.prototype.setVisible}),getListOfParents:function(e,i){var o=g(e,function(t,e,i){return e=d(e.parent,""),void 0===t[e]&&(t[e]=[]),t[e].push(i),t},{});return f(o,function(e,o,r){""!==o&&t.inArray(o,i)===-1&&(l(e,function(t){r[""].push(t)}),delete r[o])}),o},getTree:function(){var t,e=this;return t=i(this.data,function(t){return t.id}),t=e.getListOfParents(this.data,t),e.nodeMap=[],t=e.buildNode("",-1,0,t,null),v(this.nodeMap[this.rootNode],function(t){var i=!1,o=t.parent;return t.visible=!0,(o||""===o)&&(i=e.nodeMap[o]),i}),v(this.nodeMap[this.rootNode].children,function(t){var e=!1;return l(t,function(t){t.visible=!0,t.children.length&&(e=(e||[]).concat(t.children))}),e}),this.setTreeValues(t),t},init:function(t,e){p.prototype.init.call(this,t,e),this.options.allowDrillToNode&&this.drillTo()},buildNode:function(t,e,i,o,r){var n,a=this,s=[],h=a.points[e];return l(o[t]||[],function(e){n=a.buildNode(a.points[e].id,e,i+1,o,t),s.push(n)}),e={id:t,i:e,children:s,level:i,parent:r,visible:!1},a.nodeMap[e.id]=e,h&&(h.node=e),e},setTreeValues:function(t){var e,i=this,o=i.options,n=0,a=[],s=i.points[t.i];return l(t.children,function(t){t=i.setTreeValues(t),a.push(t),t.ignore?v(t.children,function(t){var e=!1;return l(t,function(t){r(t,{ignore:!0,isLeaf:!1,visible:!1}),t.children.length&&(e=(e||[]).concat(t.children))}),e}):n+=t.val}),c(a,function(t,e){return t.sortIndex-e.sortIndex}),e=d(s&&s.value,n),r(t,{children:a,childrenTotal:n,ignore:!(d(s&&s.visible,!0)&&e>0),isLeaf:t.visible&&!n,levelDynamic:o.levelIsConstant?t.level:t.level-i.nodeMap[i.rootNode].level,name:d(s&&s.name,""),sortIndex:d(s&&s.sortIndex,-e),val:e}),t},calculateChildrenAreas:function(t,e){var i=this,r=i.options,n=this.levelMap[t.levelDynamic+1],a=d(i[n&&n.layoutAlgorithm]&&n.layoutAlgorithm,r.layoutAlgorithm),s=r.alternateStartingDirection,p=[],r=h(t.children,function(t){return!t.ignore});n&&n.layoutStartingDirection&&(e.direction="vertical"===n.layoutStartingDirection?0:1),p=i[a](e,r),l(r,function(t,r){var n=p[r];t.values=o(n,{val:t.childrenTotal,direction:s?1-e.direction:e.direction}),t.pointValues=o(n,{x:n.x/i.axisRatio,width:n.width/i.axisRatio}),t.children.length&&i.calculateChildrenAreas(t,t.values)})},setPointValues:function(){var t=this.xAxis,e=this.yAxis;l(this.points,function(i){var o,r,n,a=i.node.pointValues;a?(o=Math.round(t.translate(a.x,0,0,0,1)),r=Math.round(t.translate(a.x+a.width,0,0,0,1)),n=Math.round(e.translate(a.y,0,0,0,1)),a=Math.round(e.translate(a.y+a.height,0,0,0,1)),i.shapeType="rect",i.shapeArgs={x:Math.min(o,r),y:Math.min(n,a),width:Math.abs(r-o),height:Math.abs(a-n)},i.plotX=i.shapeArgs.x+i.shapeArgs.width/2,i.plotY=i.shapeArgs.y+i.shapeArgs.height/2):(delete i.plotX,delete i.plotY)})},setColorRecursive:function(t,e){var i,o,r=this;t&&(i=r.points[t.i],o=r.levelMap[t.levelDynamic],e=d(i&&i.options.color,o&&o.color,e),i&&(i.color=e),t.children.length&&l(t.children,function(t){r.setColorRecursive(t,e)}))},algorithmGroup:function(t,e,i,o){this.height=t,this.width=e,this.plot=o,this.startDirection=this.direction=i,this.lH=this.nH=this.lW=this.nW=this.total=0,this.elArr=[],this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(t,e){return Math.max(t/e,e/t)}},this.addElement=function(t){this.lP.total=this.elArr[this.elArr.length-1],this.total+=t,0===this.direction?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)),this.elArr.push(t)},this.reset=function(){this.lW=this.nW=0,this.elArr=[],this.total=0}},algorithmCalcPoints:function(t,e,i,o){var r,n,a,s,h,d=i.lW,p=i.lH,c=i.plot,u=0,f=i.elArr.length-1;e?(d=i.nW,p=i.nH):h=i.elArr[i.elArr.length-1],l(i.elArr,function(t){(e||u<f)&&(0===i.direction?(r=c.x,n=c.y,a=d,s=t/a):(r=c.x,n=c.y,s=p,a=t/s),o.push({x:r,y:n,width:a,height:s}),0===i.direction?c.y+=s:c.x+=a),u+=1}),i.reset(),0===i.direction?i.width-=d:i.height-=p,c.y=c.parent.y+(c.parent.height-i.height),c.x=c.parent.x+(c.parent.width-i.width),t&&(i.direction=1-i.direction),e||i.addElement(h)},algorithmLowAspectRatio:function(t,e,i){var o,r=[],n=this,a={x:e.x,y:e.y,parent:e},s=0,h=i.length-1,d=new this.algorithmGroup(e.height,e.width,e.direction,a);return l(i,function(i){o=e.width*e.height*(i.val/e.val),d.addElement(o),d.lP.nR>d.lP.lR&&n.algorithmCalcPoints(t,!1,d,r,a),s===h&&n.algorithmCalcPoints(t,!0,d,r,a),s+=1}),r},algorithmFill:function(t,e,i){var o,r,n,a,s,h=[],d=e.direction,p=e.x,c=e.y,u=e.width,f=e.height;return l(i,function(i){o=e.width*e.height*(i.val/e.val),r=p,n=c,0===d?(s=f,a=o/s,u-=a,p+=a):(a=u,s=o/a,f-=s,c+=s),h.push({x:r,y:n,width:a,height:s}),t&&(d=1-d)}),h},strip:function(t,e){return this.algorithmLowAspectRatio(!1,t,e)},squarified:function(t,e){return this.algorithmLowAspectRatio(!0,t,e)},sliceAndDice:function(t,e){return this.algorithmFill(!0,t,e)},stripes:function(t,e){return this.algorithmFill(!1,t,e)},translate:function(){var t,e;p.prototype.translate.call(this),this.rootNode=d(this.options.rootId,""),this.levelMap=g(this.options.levels,function(t,e){return t[e.level]=e,t},{}),e=this.tree=this.getTree(),this.axisRatio=this.xAxis.len/this.yAxis.len,this.nodeMap[""].pointValues=t={x:0,y:0,width:100,height:100},this.nodeMap[""].values=t=o(t,{width:t.width*this.axisRatio,direction:"vertical"===this.options.layoutStartingDirection?0:1,val:e.val}),this.calculateChildrenAreas(e,t),this.colorAxis?this.translateColors():this.options.colorByPoint||this.setColorRecursive(this.tree,void 0),e=this.nodeMap[this.rootNode].pointValues,this.xAxis.setExtremes(e.x,e.x+e.width,!1),this.yAxis.setExtremes(e.y,e.y+e.height,!1),this.xAxis.setScale(),this.yAxis.setScale(),this.setPointValues()},drawDataLabels:function(){var t,e,i=this,r=h(i.points,function(t){return t.node.visible});l(r,function(r){e=i.levelMap[r.node.levelDynamic],t={style:{}},r.node.isLeaf||(t.enabled=!1),e&&e.dataLabels&&(t=o(t,e.dataLabels),i._hasPointLabels=!0),r.shapeArgs&&(t.style.width=r.shapeArgs.width),r.dlOptions=o(t,r.options.dataLabels)}),p.prototype.drawDataLabels.call(this)},alignDataLabel:e.column.prototype.alignDataLabel,pointAttribs:function(t,e){var i=this.levelMap[t.node.levelDynamic]||{},o=this.options,r=e&&o.states[e]||{},i={stroke:t.borderColor||i.borderColor||r.borderColor||o.borderColor,"stroke-width":d(t.borderWidth,i.borderWidth,r.borderWidth,o.borderWidth),dashstyle:t.borderDashStyle||i.borderDashStyle||r.borderDashStyle||o.borderDashStyle,fill:t.color||this.color,zIndex:"hover"===e?1:0};return t.node.level<=this.nodeMap[this.rootNode].level?(i.fill="none",i["stroke-width"]=0):t.node.isLeaf?e&&(i.fill=u(i.fill).brighten(r.brightness).get()):i.fill=d(o.interactByLeaf,!o.allowDrillToNode)?"none":u(i.fill).setOpacity("hover"===e?.75:.15).get(),i},drawPoints:function(){var t=this,i=h(t.points,function(t){return t.node.visible});l(i,function(e){var i="levelGroup-"+e.node.levelDynamic;t[i]||(t[i]=t.chart.renderer.g(i).attr({zIndex:1e3-e.node.levelDynamic}).add(t.group)),e.group=t[i],e.pointAttr={"":t.pointAttribs(e),hover:t.pointAttribs(e,"hover"),select:{}}}),e.column.prototype.drawPoints.call(this),t.options.allowDrillToNode&&l(i,function(e){var i;e.graphic&&(i=e.drillId=t.options.interactByLeaf?t.drillToByLeaf(e):t.drillToByGroup(e),e.graphic.css({cursor:i?"pointer":"default"}))})},drillTo:function(){var e=this;t.addEvent(e,"click",function(t){var i,t=t.point,o=t.drillId;o&&(i=e.nodeMap[e.rootNode].name||e.rootNode,t.setState(""),e.drillToNode(o),e.showDrillUpButton(i))})},drillToByGroup:function(t){var e=!1;return t.node.level-this.nodeMap[this.rootNode].level!==1||t.node.isLeaf||(e=t.id),e},drillToByLeaf:function(t){var e=!1;if(t.node.parent!==this.rootNode&&t.node.isLeaf)for(t=t.node;!e;)t=this.nodeMap[t.parent],t.parent===this.rootNode&&(e=t.id);return e},drillUp:function(){var t=null;this.rootNode&&(t=this.nodeMap[this.rootNode],t=null!==t.parent?this.nodeMap[t.parent]:this.nodeMap[""]),null!==t&&(this.drillToNode(t.id),""===t.id?this.drillUpButton=this.drillUpButton.destroy():(t=this.nodeMap[t.parent],this.showDrillUpButton(t.name||t.id)))},drillToNode:function(t){this.options.rootId=t,this.isDirty=!0,this.chart.redraw()},showDrillUpButton:function(t){var e,i,o=this,t=t||"< Back",r=o.options.drillUpButton;r.text&&(t=r.text),this.drillUpButton?this.drillUpButton.attr({text:t}).align():(i=(e=r.theme)&&e.states,this.drillUpButton=this.chart.renderer.button(t,null,null,function(){o.drillUp()},e,i&&i.hover,i&&i.select).attr({align:r.position.align,zIndex:9}).add().align(r.position,!1,r.relativeTo||"plotBox"))},buildKDTree:s,drawLegendSymbol:t.LegendSymbolMixin.drawRectangle,getExtremes:function(){p.prototype.getExtremes.call(this,this.colorValueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,p.prototype.getExtremes.call(this)},getExtremesFromAll:!0,bindAxes:function(){var e={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,dataMin:0,minPadding:0,max:100,dataMax:100,maxPadding:0,startOnTick:!1,title:null,tickPositions:[]};p.prototype.bindAxes.call(this),t.extend(this.yAxis.options,e),t.extend(this.xAxis.options,e)}}))})},function(t,e){t.exports=s},function(t,e){t.exports=l},function(t,e){t.exports=h},function(t,e,i){var o;o=function(){"use strict";return{line:{chart:{type:"line"},title:{text:""},subtitle:{text:""},xAxis:{crosshair:!0},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} </b></td></tr>',footerFormat:"</table>",useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[]},column:{chart:{type:"column"},title:{text:""},subtitle:{text:""},xAxis:{categories:[],crosshair:!0},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} </b></td></tr>',footerFormat:"</table>",useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[]},column_stacked:{chart:{type:"column"},title:{text:""},subtitle:{text:""},xAxis:{categories:[],crosshair:!0},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} </b></td></tr>',footerFormat:"</table>",useHTML:!0},plotOptions:{column:{stacking:"normal",pointPadding:.2,borderWidth:0}},series:[]},area:{chart:{type:"area"},title:{text:""},subtitle:{text:""},xAxis:{categories:[],crosshair:!0},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} </b></td></tr>',footerFormat:"</table>",useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[]},pyramid:{chart:{type:"bar"},title:{text:""},subtitle:{text:""},xAxis:[{categories:[],reversed:!1,labels:{step:1}},{categories:[],opposite:!0,reversed:!1,linkedTo:0,labels:{step:1}}],yAxis:{title:{text:null},labels:{formatter:function(){return Math.abs(this.value)}}},plotOptions:{series:{stacking:"normal"}},tooltip:{formatter:function(){return"<b>"+this.series.name+", age "+this.point.category+"</b><br/>Population: "+Highcharts.numberFormat(Math.abs(this.point.y),0)}},series:[]},area_stacked:{chart:{type:"area"},title:{text:""},subtitle:{text:""},xAxis:{categories:[],crosshair:!0},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} </b></td></tr>',footerFormat:"</table>",useHTML:!0},plotOptions:{area:{stacking:"normal"}},series:[]},pie:{chart:{type:"pie"},title:{text:""},subtitle:{text:""},xAxis:{categories:[],crosshair:!0},plotOptions:{series:{dataLabels:{enabled:!0,format:"{point.name}: {point.y:.1f}"}}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} </b></td></tr>',footerFormat:"</table>",useHTML:!0},series:[{data:[]}],drilldown:{series:[]}},donut:{chart:{type:"pie"},title:{text:""},subtitle:{text:""},xAxis:{categories:[],crosshair:!0},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} </b></td></tr>',footerFormat:"</table>",useHTML:!0},series:[]},scatter:{chart:{type:"scatter",zoomType:"xy"},series:[]},heatmap:{chart:{type:"heatmap",marginTop:40,marginBottom:80,plotBorderWidth:1},title:{text:""},xAxis:{categories:[]},yAxis:{categories:[],title:null},colorAxis:{min:0,minColor:"#FFFFFF"},legend:{align:"right",layout:"vertical",margin:0,verticalAlign:"top",y:25,symbolHeight:280},tooltip:{formatter:function(){return"<b>"+this.series.xAxis.categories[this.point.x]+"</b>  <br><b>"+this.series.yAxis.categories[this.point.y]+"</b><br> Value : <b>"+this.point.value+"</b>"}},series:[{name:"",borderWidth:1,data:[],dataLabels:{enabled:!0,color:"#000000"}}]},treemap:{series:[]},boxplot:{chart:{type:"boxplot"},title:{text:""},legend:{enabled:!1},xAxis:{categories:[],title:{text:""}},yAxis:{title:{text:""}},series:[]},bubble:{chart:{type:"bubble",plotBorderWidth:1,zoomType:"xy"},legend:{enabled:!1},title:{text:"Sugar and fat intake per country"},subtitle:{text:'Source: <a href="http://www.euromonitor.com/">Euromonitor</a> and <a href="https://data.oecd.org/">OECD</a>'},xAxis:{gridLineWidth:1,title:{text:""},labels:{format:"{value} "},plotLines:[{color:"black",dashStyle:"dot",width:2,value:65,label:{rotation:0,y:15,style:{fontStyle:"italic"},text:""},zIndex:3}]},yAxis:{startOnTick:!1,endOnTick:!1,title:{text:""},labels:{format:"{value}"},maxPadding:.2,plotLines:[{color:"black",dashStyle:"dot",width:2,value:50,label:{align:"right",style:{fontStyle:"italic"},text:"",x:-10},zIndex:3}]},plotOptions:{series:{dataLabels:{enabled:!0,format:"{point.name}"}}},series:[{data:[]}]},bubblecircle:{chart:{type:"bubble",plotBorderWidth:1,zoomType:"xy"},legend:{enabled:!1},title:{text:""},subtitle:{text:""},xAxis:{gridLineWidth:1,title:{text:""},labels:{format:"{value} "},plotLines:[{color:"black",dashStyle:"dot",width:2,value:65,label:{rotation:0,y:15,style:{fontStyle:"italic"},text:""},zIndex:3}]},yAxis:{startOnTick:!1,endOnTick:!1,title:{text:""},labels:{format:"{value}"},maxPadding:.2,plotLines:[{color:"black",dashStyle:"dot",width:2,value:50,label:{align:"right",style:{fontStyle:"italic"},text:"",x:-10},zIndex:3}]},plotOptions:{series:{dataLabels:{enabled:!1,format:"{point.name}"}}},series:[{data:[]}]}}}.call(e,i,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,i){var o,r;o=[i(2),i(3),i(4),i(5),i(6),i(7),i(8),i(21),i(22),i(18)],r=function(t,e,i,o,r,n,a,s){"use strict";function l(e){i.info("FENIX JVenn"),i.info(e),t.extend(!0,this,n,e);var o=this._validateInput();return o===!0?(this._initVariables(),this._bindEventListeners(),this._renderJVenn(this.pivotatorConfig),this):(i.error("Impossible to create JVenn"),void i.error(o))}return l.prototype.on=function(t,e,i){var o=i||this;return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:o,callback:e}),this},l.prototype.redraw=function(){this.chart.length>0||i.warn("Abort redraw")},l.prototype.update=function(t){this.type=t.type?t.type:this.type,this._renderJVenn(t)},l.prototype._renderJVenn=function(e){var i=this.model;e||alert("Impossible to find chart configuration: "+this.type);var e=t.extend(!0,this._populateData(i,s),e);this.chart=this.el.jvenn(e),this._trigger("ready")},l.prototype._populateData=function(t,e){for(var i in t.cols)if(t.cols.hasOwnProperty(i)){var o=t.cols[i];e.xAxis.categories.push(o.title[this.lang])}for(var r in t.rows){var n=t.data[r],a=[];for(var s in n)null!=n[s]&&a.push(n[s]);e.series.push({name:t.rows[r].join(" "),data:a})}return e},l.prototype._trigger=function(t){if(!this.channels[t])return!1;for(var e=Array.prototype.slice.call(arguments,1),i=0,o=this.channels[t].length;i<o;i++){var r=this.channels[t][i];r.callback.apply(r.context,e)}return this},l.prototype._validateInput=function(){
var t=!0,e=[];return e.length>0?e:t},l.prototype._initVariables=function(){this.channels={},this.pivotator=new a},l.prototype._bindEventListeners=function(){},l.prototype._getEventName=function(t){return this.id.concat(t)},l.prototype._unbindEventListeners=function(){},l.prototype.dispose=function(){this._unbindEventListeners()},l}.apply(e,o),!(void 0!==r&&(t.exports=r))},function(t,e,i){var o;o=function(){"use strict";return{displayMode:"classic",displayStat:"true",xAxis:{categories:[]},series:[],exporting:!0}}.call(e,i,e,t),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports=d}])});
//# sourceMappingURL=fenix-ui-chart-creator.min.js.map